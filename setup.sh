#!/bin/bash

echo "  ______ ______ ______ ______ ______ ______ ______ ______ ______ ______
 |______|______|______|______|______|______|______|______|______|______|
       |__   __| (_)                           | |
          | |_ __ _ _ __  _ __ ___   ___  _ __ | | _____ _   _
          | | '__| | '_ \| '_ \` _ \ / _ \| '_ \| |/ / _ | | | |
          | | |  | | |_) | | | | | | (_) | | | |   |  __| |_| |
          |_|_|  |_| .__/|_| |_| |_|\___/|_| |_|_|\_\___|\__, |
                   | |                                    __/ |
  ______ ______ ___|_| ______ ______ ______ ______ ______|___/__ ______
 |______|______|______|______|______|______|______|______|______|______|
                                                                        "

env_arg="$1"

case "${env_arg,,}" in
  dev)
    env="dev"
    ;;
  staging)
    env="stage"
    ;;
  prod)
    env="prod"
    ;;
  *)
    env="dev"
    ;;
esac

minikube addons enable metrics-server
minikube start
./deploy-configs.sh $env
./deploy-secrets.sh $env
./install-dependencies.sh $env
